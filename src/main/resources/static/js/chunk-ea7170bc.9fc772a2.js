(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ea7170bc"],{"141c":function(e,t,n){"use strict";var r=n("5da6"),a=n.n(r);a.a},"1b69":function(e,t,n){"use strict";var r=n("c85a"),a=n.n(r);a.a},"4a6a":function(e,t,n){"use strict";n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return o}));var r=n("0c6d");function a(e){return r["a"].fetchP({url:"/teamwork-api/cust/modifyStaffName",data:e})}function i(e){return r["a"].fetchG({url:"/teamwork-api/cust/modifyPassword",data:e})}function c(e){return r["a"].fetchG({url:"/teamwork-api/sec/getSecOrgByOrgId",data:e})}function s(e){return r["a"].fetchP({url:"/teamwork-api/sec/saveSecOrg",data:e})}function l(e){return r["a"].fetchG({url:"/teamwork-api/sec/getSecAccAuthByOrgIdAndUserId",data:e})}function o(e){return r["a"].fetchP({url:"/teamwork-api/sec/saveUserInfo",data:e})}},"5d46":function(e,t,n){},"5da6":function(e,t,n){},ad2f:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"d",(function(){return s})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return h}));var r=n("0c6d"),a=(n("08c1"),n("4360")),i=n("e1d2");function c(e){return r["a"].fetchG({url:"/teamwork-api/sec/getSecMenus",data:e})}function s(e){return r["a"].fetchP({url:"/teamwork-api/sec/saveSecMenus",data:e})}function l(e){return r["a"].fetchG({url:"/teamwork-api/sec/generateBusinessId",data:e})}var o=!1,d=function e(t,n){for(var r=0;r<n.length;r++){var a=n[r];a&&(a.businessId&&a.businessId===t?o=!0:n[r].secMenuDOS&&e(t,n[r].secMenuDOS))}};function h(e){var t=a["a"].state.MenuData.menuData;return t&&0===t.length?(t=i["a"].getMenuData2({userId:a["a"].state.userContext.userInfo.staffId}),o=!1,d(e,t),o):(o=!1,d(e,t),o)}},c75e:function(e,t,n){"use strict";var r=n("5d46"),a=n.n(r);a.a},c85a:function(e,t,n){},cc89:function(e,t,n){"use strict";n.r(t);var r,a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{padding:"10px"}},[n("a-row",{attrs:{gutter:16}},[n("a-col",{attrs:{span:6}},[n("RoleList",{ref:"getResult",attrs:{isQuery:e.isQuery,isEdit:e.isEdit,isDelete:e.isDelete},on:{editDepartment:e.editDepartment,deleteSuccess:e.deleteSuccess}})],1),n("a-col",{attrs:{span:18}},[n("RoleHeader",{ref:"headere",attrs:{auth:e.auth,departmentRole:e.department,menuResult:e.menuResult},on:{getSubmitValue:e.getMenuResult,submitSuccess:e.submitSuccess,returnAdd:e.deleteSuccess}}),n("div",{staticStyle:{padding:"10px","margin-top":"10px","background-color":"#ffffff"}},[n("a-row",{attrs:{type:"flex",justify:"space-around",align:"middle",gutter:16}},[n("a-col",{attrs:{span:10}},[n("MenuSideLeft",{ref:"allAuths",attrs:{choiceItems:e.leftChoiceItems,departmentRole:e.department},on:{choiceItems:e.getChoiceItems,initAuth:e.addRole}})],1),n("a-col",{staticStyle:{"text-align":"center"},attrs:{span:4}},[n("a-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",disabled:!e.addVisible},on:{click:e.addRole}},[e._v("\n                            加入右侧 >\n                        ")]),n("br"),n("a-button",{attrs:{type:"primary",disabled:!e.removeVisible},on:{click:e.removeRole}},[e._v("\n                            < 加入左侧\n                        ")])],1),n("a-col",{attrs:{span:10}},[n("MenuSideRight",{ref:"right",attrs:{choiceItems:e.rightChoiceItems},on:{choiceItems:e.getLeftChoiceItems}})],1)],1)],1)],1)],1)],1)},i=[],c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",staticStyle:{height:"400px",border:"1px solid #ebedf0",padding:"10px"}},[n("span",{staticClass:"font"},[e._v("未配置")]),n("a-input-search",{staticStyle:{"margin-bottom":"8px"},attrs:{placeholder:"Search"},on:{change:e.onChange}}),n("div",{staticStyle:{"overflow-y":"auto","overflow-x":"auto",height:"300px"}},[n("a-tree",{attrs:{checkable:"",expandedKeys:e.expandedKeys,autoExpandParent:e.autoExpandParent,checkStrictly:!0,selectedKeys:e.selectedKeys,treeData:e.treeData},on:{expand:e.onExpand,select:e.onSelect,check:e.onCheck},scopedSlots:e._u([{key:"title",fn:function(t){return[t.title.indexOf(e.searchValue)>-1?n("span",[e._v("\n              "+e._s(t.title.substr(0,t.title.indexOf(e.searchValue)))+"\n              "),n("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValue))]),e._v("\n              "+e._s(t.title.substr(t.title.indexOf(e.searchValue)+e.searchValue.length))+"\n            ")]):n("span",[t.disabled?n("span",[n("span",{staticStyle:{"background-color":"#bae7ff"},attrs:{title:"此权限已配置"}},[e._v(e._s(t.title))]),n("a-icon",{staticStyle:{"margin-left":"5px","font-size":"15px",color:"#1890ff"},attrs:{type:"check-circle"}})],1):n("span",[e._v("\n                    "+e._s(t.title)+"\n                ")])])]}}]),model:{value:e.checkedKeys,callback:function(t){e.checkedKeys=t},expression:"checkedKeys"}})],1)],1)},s=[],l=(n("9fa4"),n("3b54"),n("3cb6"),n("1228")),o=(n("0eb5"),n("a4c5"),n("f763"),n("ad2f")),d=[],h=function e(t,n){for(var r,a=0;a<n.length;a++){var i=n[a];i.children&&(i.children.some((function(e){return e.key===t}))?r=i.key:e(t,i.children)&&(r=e(t,i.children)))}return r},u={props:{choiceItems:{type:Array,default:function(){return[]}},departmentRole:{type:Object,default:function(){return{}}}},watch:{choiceItems:{handler:function(e){this.renderTreeData(e)}},departmentRole:{handler:function(e){this.setItemUnDisabled(this.treeData),this.checkedKeys.checked=Object.assign([],e.menuIds),this.checkedKeys=Object.assign({},this.checkedKeys),this.$emit("choiceItems",this.checkedKeys.checked),this.$emit("initAuth")}}},data:function(){return{expandedKeys:[],autoExpandParent:!0,selectedKeys:[],searchValue:void 0,checkedKeys:{},oldCheckedKeys:{},treeData:[]}},methods:{resetAll:function(){this.setItemUnDisabled(this.treeData),this.checkedKeys.checked=[],this.checkedKeys=Object.assign({},this.checkedKeys),this.expandedKeys=[]},renderTreeData:function(e){this.getTreeItem(this.treeData,e);var t=this.checkedKeys.checked.filter((function(t){return!e.some((function(e){return e===t}))}));this.checkedKeys.checked=Object.assign([],t),this.checkedKeys=Object.assign({},this.checkedKeys)},getTreeItem:function(e,t){var n=!0,r=!1,a=void 0;try{for(var i,c=e[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var s=i.value;-1!==t.indexOf(s.key)&&void 0!==s.disabled&&delete s.disabled,s.children&&s.children.length>0&&this.getTreeItem(s.children,t)}}catch(l){r=!0,a=l}finally{try{n||null==c.return||c.return()}finally{if(r)throw a}}},onCheck:function(e,t){if(this.oldCheckedKeys.checked&&this.oldCheckedKeys.checked.length>e.checked.length){console.log("移除");var n=this.findRemoveKey(this.oldCheckedKeys.checked,e.checked),r=!0,a=!1,i=void 0;try{for(var c,s=n[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var o=c.value,d=this.findChildKeysByParentKey(o),h=!0,u=!1,f=void 0;try{for(var y,p=d[Symbol.iterator]();!(h=(y=p.next()).done);h=!0){var m=y.value,v=e.checked.indexOf(m);-1!==v&&e.checked.splice(v,1)}}catch(x){u=!0,f=x}finally{try{h||null==p.return||p.return()}finally{if(u)throw f}}}}catch(x){a=!0,i=x}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}}else if(!this.oldCheckedKeys.checked||this.oldCheckedKeys.checked.length<e.checked.length){var g=e.checked[e.checked.length-1],b=this.findChildKeysByParentKey(g);b.length>0&&(e.checked=Object(l["a"])(new Set([].concat(Object(l["a"])(e.checked),Object(l["a"])(b)))));var k=this.findParentKeysByCurrentKey(g);k.length>0&&(e.checked=Array.from(new Set([].concat(Object(l["a"])(e.checked),Object(l["a"])(k)))))}this.checkedKeys=e,this.oldCheckedKeys=e,this.$emit("choiceItems",e.checked)},findRemoveKey:function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var l=c.value,o=!0,d=!0,h=!1,u=void 0;try{for(var f,y=t[Symbol.iterator]();!(d=(f=y.next()).done);d=!0){var p=f.value;if(p===l){o=!1;break}}}catch(m){h=!0,u=m}finally{try{d||null==y.return||y.return()}finally{if(h)throw u}}o&&n.push(l)}}catch(m){a=!0,i=m}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n},findParentKeysByCurrentKey:function(e){var t=[];return this.findKeysForParent(this.treeData,e,t,this.treeData),t},findKeysForParent:function(e,t,n,r){for(var a=0;a<e.length;a++)e[a].key===t?e[a].parentId&&(n.push(e[a].parentId),this.findKeysForParent(r,e[a].parentId,n,r)):e[a].children&&e[a].children.length>0&&this.findKeysForParent(e[a].children,t,n,r)},findChildKeysByParentKey:function(e){var t=[];return this.findKeyForChild(this.treeData,e,t),t},findKeyForChild:function(e,t,n){for(var r=0;r<e.length;r++)e[r].key===t&&e[r].children&&e[r].children.length>0?this.getSelectedKey(e[r].children,n):e[r].children&&e[r].children.length>0&&this.findKeyForChild(e[r].children,t,n)},getSelectedKey:function(e,t){for(var n=0;n<e.length;n++)t.push(e[n].key),e[n].children&&e[n].children.length&&this.getSelectedKey(e[n].children,t)},addRoleAuth:function(){this.setItemDisabled(this.treeData),this.treeData=Object.assign([],this.treeData)},setItemDisabled:function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var c=a.value;-1!==this.checkedKeys.checked.indexOf(c.key)&&(c.disabled=!0),c.children&&c.children.length>0&&this.setItemDisabled(c.children)}}catch(s){n=!0,r=s}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},setItemUnDisabled:function(e){var t=!0,n=!1,r=void 0;try{for(var a,i=e[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var c=a.value;c.disabled=!1,c.children&&c.children.length>0&&this.setItemUnDisabled(c.children)}}catch(s){n=!0,r=s}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}},onChange:function(e){var t=this,n=e.target.value;n||(n=void 0);var r=d.map((function(e){return e.title.indexOf(n)>-1?h(e.key,t.treeData):null})).filter((function(e,t,n){return e&&n.indexOf(e)===t}));Object.assign(this,{expandedKeys:r,searchValue:n,autoExpandParent:!0})},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},onSelect:function(e,t){this.selectedKeys=e},searchMenu:function(e){for(var t=0;t<e.length;t++)e[t].title=e[t].menuName,e[t].key=e[t].menuId,e[t].scopedSlots={title:"title"},e[t].child&&(e[t].children=e[t].child,this.searchMenu(e[t].child))},getTree:function(){var e=this;Object(o["b"])().then((function(t){e.treeData=t,e.searchMenu(t);var n=function e(t){for(var n=0;n<t.length;n++){var r=t[n],a=r.key;d.push({key:a,title:r.title}),r.children&&e(r.children,r.key)}};n(t)}))}},mounted:function(){this.getTree()}},f=u,y=(n("c75e"),n("4e82")),p=Object(y["a"])(f,c,s,!1,null,"2dca3808",null),m=p.exports,v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",staticStyle:{height:"400px",border:"1px solid #ebedf0",padding:"10px"}},[n("span",{staticClass:"font"},[e._v("已配置")]),n("a-input-search",{staticStyle:{"margin-bottom":"8px"},attrs:{placeholder:"Search"},on:{change:e.onChange}}),n("div",{staticStyle:{"overflow-y":"auto","overflow-x":"auto",height:"300px"}},[n("a-tree",{attrs:{checkable:"",expandedKeys:e.expandedKeys,autoExpandParent:e.autoExpandParent,checkStrictly:!0,selectedKeys:e.selectedKeys,treeData:e.treeDatas},on:{expand:e.onExpand,select:e.onSelect,check:e.onCheck},scopedSlots:e._u([{key:"title",fn:function(t){return[t.title.indexOf(e.searchValue)>-1?n("span",[e._v("\n              "+e._s(t.title.substr(0,t.title.indexOf(e.searchValue)))+"\n              "),n("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValue))]),e._v("\n              "+e._s(t.title.substr(t.title.indexOf(e.searchValue)+e.searchValue.length))+"\n            ")]):n("span",[e._v("\n                "+e._s(t.title)+"\n            ")])]}}]),model:{value:e.checkedKeys,callback:function(t){e.checkedKeys=t},expression:"checkedKeys"}})],1)],1)},g=[],b=n("f010"),k=[],x=function e(t,n){for(var r,a=0;a<n.length;a++){var i=n[a];i.children&&(i.children.some((function(e){return e.key===t}))?r=i.key:e(t,i.children)&&(r=e(t,i.children)))}return r},K=(r={props:{type:{type:String,default:""}},data:function(){return{expandedKeys:[],autoExpandParent:!0,selectedKeys:[],searchValue:void 0,checkedKeys:{},oldCheckedKeys:{},treeData:[],treeDatas:[]}}},Object(b["a"])(r,"props",{choiceItems:{type:Array,default:function(){return[]}}}),Object(b["a"])(r,"watch",{choiceItems:{handler:function(e){this.renderTreeData(e)}}}),Object(b["a"])(r,"methods",{resetAll:function(){this.checkedKeys={},this.oldCheckedKeys={},this.expandedKeys=[],this.selectedKeys=[],this.treeDatas=[]},renderTreeData:function(e){var t=Object.assign([],this.treeData),n=[];this.getTreeItem(t,e,n),this.treeDatas=Object.assign([],n)},getTreeItem:function(e,t,n){var r=!0,a=!1,i=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var l=c.value;if(t.indexOf(l.key)>-1){var o=Object.assign({},l);o.children=[],n.push(o),l.children&&l.children.length>0&&this.getTreeItem(l.children,t,o.children)}}}catch(d){a=!0,i=d}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}},onCheck:function(e,t){if(this.oldCheckedKeys.checked&&this.oldCheckedKeys.checked.length>e.checked.length){var n=this.findRemoveKey(this.oldCheckedKeys.checked,e.checked),r=!0,a=!1,i=void 0;try{for(var c,s=n[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var o=c.value,d=this.findChildKeysByParentKey(o),h=!0,u=!1,f=void 0;try{for(var y,p=d[Symbol.iterator]();!(h=(y=p.next()).done);h=!0){var m=y.value,v=e.checked.indexOf(m);-1!==v&&e.checked.splice(v,1)}}catch(w){u=!0,f=w}finally{try{h||null==p.return||p.return()}finally{if(u)throw f}}}}catch(w){a=!0,i=w}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}var g=this.findParentKeysByCurrentKey(n[0]),b=!0,k=!1,x=void 0;try{for(var K,O=g[Symbol.iterator]();!(b=(K=O.next()).done);b=!0){var S=K.value,I=e.checked.indexOf(S);-1!==I&&e.checked.splice(I,1)}}catch(w){k=!0,x=w}finally{try{b||null==O.return||O.return()}finally{if(k)throw x}}}else if(!this.oldCheckedKeys.checked||this.oldCheckedKeys.checked.length<e.checked.length){var D=e.checked[e.checked.length-1],C=this.findChildKeysByParentKey(D);C.length>0&&(e.checked=Object(l["a"])(new Set([].concat(Object(l["a"])(e.checked),Object(l["a"])(C)))))}this.checkedKeys=e,this.oldCheckedKeys=e,this.$emit("choiceItems",e.checked)},findRemoveKey:function(e,t){var n=[],r=!0,a=!1,i=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var l=c.value,o=!0,d=!0,h=!1,u=void 0;try{for(var f,y=t[Symbol.iterator]();!(d=(f=y.next()).done);d=!0){var p=f.value;if(p===l){o=!1;break}}}catch(m){h=!0,u=m}finally{try{d||null==y.return||y.return()}finally{if(h)throw u}}o&&n.push(l)}}catch(m){a=!0,i=m}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}return n},findParentKeysByCurrentKey:function(e){var t=[];return this.findKeysForParent(this.treeData,e,t,this.treeData),t},findKeysForParent:function(e,t,n,r){for(var a=0;a<e.length;a++)e[a].key===t?e[a].parentKey&&(n.push(e[a].parentKey),this.findKeysForParent(r,e[a].parentKey,n,r)):e[a].children&&e[a].children.length>0&&this.findKeysForParent(e[a].children,t,n,r)},findChildKeysByParentKey:function(e){var t=[];return this.findKeyForChild(this.treeData,e,t),t},findKeyForChild:function(e,t,n){for(var r=0;r<e.length;r++)e[r].key===t&&e[r].children&&e[r].children.length>0?this.getSelectedKey(e[r].children,n):e[r].children&&e[r].children.length>0&&this.findKeyForChild(e[r].children,t,n)},getSelectedKey:function(e,t){for(var n=0;n<e.length;n++)t.push(e[n].key),e[n].children&&e[n].children.length&&this.getSelectedKey(e[n].children,t)},findOneKeyForChildKey:function(e,t,n){for(var r=0;r<e.length;r++){if(e[r].key==t){if(e[r].children&&e[r].children.length>0){var a=!0,i=!1,c=void 0;try{for(var s,l=e[r].children[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var o=s.value;n.push(o.key)}}catch(d){i=!0,c=d}finally{try{a||null==l.return||l.return()}finally{if(i)throw c}}}return}e[r].children&&e[r].children.length>0&&this.findOneKeyForChildKey(e[r].children,t,n)}},removeRoleAuth:function(){this.updateTreeData(this.checkedKeys.checked),this.checkedKeys.checked=[],this.checkedKeys=Object.assign({},this.checkedKeys)},updateTreeData:function(e){var t=Object.assign([],this.treeDatas),n=[];this.updateTreeItem(t,e,n),this.treeDatas=Object.assign([],n)},updateTreeItem:function(e,t,n){var r=!0,a=!1,i=void 0;try{for(var c,s=e[Symbol.iterator]();!(r=(c=s.next()).done);r=!0){var l=c.value;if(-1===t.indexOf(l.key)){var o=Object.assign({},l);o.children=[],n.push(o),l.children&&l.children.length>0&&this.updateTreeItem(l.children,t,o.children)}}}catch(d){a=!0,i=d}finally{try{r||null==s.return||s.return()}finally{if(a)throw i}}},onChange:function(e){var t=this,n=e.target.value;n||(n=void 0);var r=k.map((function(e){return e.title.indexOf(n)>-1?x(e.key,t.treeData):null})).filter((function(e,t,n){return e&&n.indexOf(e)===t}));Object.assign(this,{expandedKeys:r,searchValue:n,autoExpandParent:!0})},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},onSelect:function(e,t){this.selectedKeys=e},searchMenu:function(e){for(var t=0;t<e.length;t++)e[t].title=e[t].menuName,e[t].key=e[t].menuId,e[t].scopedSlots={title:"title"},e[t].child&&(e[t].children=e[t].child,this.searchMenu(e[t].child))},getTree:function(){var e=this;Object(o["b"])().then((function(t){e.treeData=t,e.searchMenu(t);var n=function e(t){for(var n=0;n<t.length;n++){var r=t[n],a=r.key;k.push({key:a,title:r.title}),r.children&&e(r.children,r.key)}};n(t)}))}}),Object(b["a"])(r,"mounted",(function(){this.getTree()})),r),O=K,S=(n("141c"),Object(y["a"])(O,v,g,!1,null,"6b107f94",null)),I=S.exports,D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-card",[n("template",{slot:"title"},["add"==e.operationType?n("span",{staticClass:"common-head-font"},[e._v("新增角色")]):"edit"==e.operationType?n("span",{staticClass:"common-head-font"},[e._v("修改角色")]):e._e(),n("a-button",{staticStyle:{float:"right"},attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")]),"edit"==e.operationType?n("a",{staticStyle:{float:"right",margin:"3px"},on:{click:e.returnAdd}},[e._v("<-返回新增")]):e._e()],1),n("a-row",[n("a-col",{attrs:{span:11}},[n("a-form-item",{attrs:{label:"角色名称","label-col":e.formItemLayout.labelCol,"wrapper-col":{span:18}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["roleName"],expression:"[\n                          'roleName'\n                        ]"}],model:{value:e.roleName,callback:function(t){e.roleName=t},expression:"roleName"}})],1)],1),n("a-col",{attrs:{span:11}},[n("a-form-item",{attrs:{label:"归属组织","label-col":e.formItemLayout.labelCol,"wrapper-col":e.formItemLayout.wrapperCol}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["department"],expression:"[\n                              'department'\n                            ]"}],attrs:{disabled:!0},model:{value:e.department,callback:function(t){e.department=t},expression:"department"}})],1)],1),n("a-col",{attrs:{span:2}},[e.department?n("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":{span:18}}},[n("a-icon",{staticStyle:{"font-size":"20px",color:"#18c4b0",cursor:"pointer"},attrs:{type:"minus-circle"},on:{click:function(t){return t.stopPropagation(),e.deleteDepartment(t)}}})],1):n("a-form-item",{attrs:{"label-col":e.formItemLayout.labelCol,"wrapper-col":{span:18}}},[n("a-icon",{staticStyle:{"font-size":"20px",color:"#18c4b0",cursor:"pointer"},attrs:{type:"plus-circle"},on:{click:function(t){return t.stopPropagation(),e.getDepartment(t)}}})],1)],1)],1),n("a-row",[n("a-col",{attrs:{span:12}},[n("a-form-item",{attrs:{label:"备注","label-col":e.formItemLayout.labelCol,"wrapper-col":{span:16}}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"[\n                              'remark'\n                            ]"}],model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1)],1)],1)],2),n("a-modal",{attrs:{visible:e.departmentVisible,cancelText:"取消",okText:"确认",destroyOnClose:""},on:{ok:e.saveDepartment,cancel:e.handleCancel}},[n("a-input-search",{staticStyle:{"margin-left":"10px",width:"80%"},attrs:{placeholder:"Search"},on:{change:e.onChange}}),n("a-tree",{attrs:{expandedKeys:e.expandedKeys,autoExpandParent:e.autoExpandParent,treeData:e.treeData},on:{expand:e.onExpand,select:e.onSelect},scopedSlots:e._u([{key:"title",fn:function(t){return[t.title.indexOf(e.searchValue)>-1?n("span",[e._v("\n              "+e._s(t.title.substr(0,t.title.indexOf(e.searchValue)))+"\n              "),n("span",{staticStyle:{color:"#f50"}},[e._v(e._s(e.searchValue))]),e._v("\n              "+e._s(t.title.substr(t.title.indexOf(e.searchValue)+e.searchValue.length))+"\n            ")]):n("span",[e._v("\n                "+e._s(t.title)+"\n            ")])]}}])})],1)],1)},C=[],w=(n("2338"),n("fb37"),n("5279"),n("4a6a")),j=n("0c6d");function P(e){return j["a"].fetchG({url:"/teamwork-api/sec/getAllRoles",data:e})}function _(e){return j["a"].fetchP({url:"/teamwork-api/sec/saveSecRole",data:e})}var R=n("08c1");function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){Object(b["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=[],T=function e(t,n){for(var r,a=0;a<n.length;a++){var i=n[a];i.children&&(i.children.some((function(e){return e.key===t}))?r=i.key:e(t,i.children)&&(r=e(t,i.children)))}return r},$={computed:E({},Object(R["e"])({userInfo:function(e){return e.userContext.userInfo}})),props:{departmentRole:{type:Object,default:function(){return""}},menuResult:{type:Array,default:function(){return[]}},auth:{type:Array,default:function(){return[]}}},mounted:function(){this.isAdd=this.auth[0],this.isEdit=this.auth[1]},watch:{departmentRole:{handler:function(e){"edit"==e.type?(this.departmentId=e.orgId,this.department=e.orgName,this.remark=e.description):(this.department="",this.remark=""),this.operationType=e.type,this.roleName=e.roleName,this.roleId=e.id,"edit"==e.type?this.type=2:this.type=0},deep:!0},menuResult:function(e){var t=this,n=this.getMenuResult(e,[]),r={type:this.type?this.type:0,result:n,roleId:this.roleId,description:this.remark,roleName:this.roleName,orgId:this.departmentId?this.departmentId:this.selectedKeys};(2!==r.type||this.isEdit)&&(0!==r.type||this.isAdd)?n.length>0?_(r).then((function(e){t.$message.success(e),t.remark="",t.department="",t.roleId="",t.roleName="",t.operationType="add",t.type=0,t.$emit("submitSuccess")})):this.$message.error("请配置菜单权限！"):this.$message.error("无权限")}},data:function(){return{departmentId:"",operationType:"add",roleId:"",treeData:[],expandedKeys:[],autoExpandParent:!0,departmentVisible:!1,roleName:"",department:"",testData:"test",formItemLayout:{labelCol:{span:6},wrapperCol:{span:16}},form:this.$form.createForm(this),searchValue:"",selectedKeys:[],type:"",remark:"",idAdd:!1,isEdit:!1}},methods:{removeValue:function(){this.roleName="",this.department="",this.remark=""},getMenuResult:function(e,t){for(var n=0;n<e.length;n++)t.push(e[n].menuId),e[n].children&&e[n].children.length>0&&this.getMenuResult(e[n].children,t);return t},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},onChange:function(e){var t=this,n=e.target.value,r=A.map((function(e){return e.title.indexOf(n)>-1?T(e.key,t.treeData):null})).filter((function(e,t,n){return e&&n.indexOf(e)===t}));Object.assign(this,{expandedKeys:r,searchValue:n,autoExpandParent:!0})},saveDepartment:function(){var e=this;if(this.selectedKeys){var t=A.filter((function(t){return t.key===e.selectedKeys}));this.department=t[0].title}this.handleCancel()},onSelect:function(e){this.departmentId="",this.selectedKeys=e[0]},searchMenu:function(e){for(var t=0;t<e.length;t++)e[t].title=e[t].orgName,e[t].key=e[t].orgId,e[t].scopedSlots={title:"title"},e[t].parent=e.parentId,e[t].child&&e[t].child.result&&(e[t].children=e[t].child.result,e[t].children.parentId=e[t].child.orgRelatId,this.searchMenu(e[t].child.result))},deleteDepartment:function(){this.department=""},getDepartment:function(){var e=this;this.departmentVisible=!0,Object(w["c"])({orgId:11}).then((function(t){e.treeData=Array.of(t),e.searchMenu(Array.of(t));var n=function e(t){for(var n=0;n<t.length;n++){var r=t[n],a=r.key;A.push({key:a,title:r.title}),r.children&&e(r.children,r.key)}};n(Array.of(t))}))},handleCancel:function(){this.departmentVisible=!1},submit:function(){this.roleName&&this.department?this.$emit("getSubmitValue"):this.$message.error("请检查角色名称和归属部门是否为空！")},returnAdd:function(){this.operationType="add",this.type=0,this.roleId="",this.$emit("returnAdd")}}},M=$,N=Object(y["a"])(M,D,C,!1,null,"5922cec4",null),F=N.exports,B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.isQuery?n("div",{staticClass:"container"},[n("a-input-search",{staticStyle:{"margin-bottom":"8px"},attrs:{placeholder:"Search"},on:{change:e.changeData}}),n("div",{staticStyle:{"overflow-y":"auto","overflow-x":"auto",height:"500px"}},e._l(e.data,(function(t){return n("div",[n("a-row",[n("span",{staticStyle:{"font-weight":"bolder","font-size":"16px","line-height":"30px"}},[e._v(e._s(t.roleName))]),n("span",{staticStyle:{float:"right","line-height":"30px"}},[e.isEdit?n("a-icon",{staticStyle:{"margin-right":"10px",cursor:"pointer"},attrs:{type:"edit"},on:{click:function(n){return n.stopPropagation(),e.edit(t)}}}):e._e(),e.isDelete?n("a-icon",{staticStyle:{cursor:"pointer"},attrs:{type:"minus-circle"},on:{click:function(n){return n.stopPropagation(),e.remove1(t)}}}):e._e()],1)])],1)})),0),n("a-modal",{attrs:{title:"再次确认",okText:"确认",cancelText:"取消"},on:{ok:e.hideModal},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("p",[e._v("确认要删除吗？")])])],1):e._e()},L=[];function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){Object(b["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U={props:{isQuery:{type:Boolean,default:function(){return!1}},isEdit:{type:Boolean,default:function(){return!1}},isDelete:{type:Boolean,default:function(){return!1}}},computed:Q({},Object(R["e"])({userInfo:function(e){return e.userContext.userInfo}})),data:function(){return{data:[],data1:[],visible:!1,value:""}},methods:{hideModal:function(){this.remove(this.value),this.visible=!1},remove1:function(e){this.value=e,this.visible=!0},remove:function(e){var t=this;_({type:1,roleId:e.id}).then((function(e){t.$message.success(e),t.getRoles(),t.$emit("deleteSuccess")}))},edit:function(e){this.$emit("editDepartment",e,"edit")},changeData:function(e){var t=e.target.value,n=this.data1.filter((function(e){return e.roleName.indexOf(t.toLowerCase())>=0}));this.data=Object.assign([],n)},getRoles:function(){var e=this;P({orgId:11}).then((function(t){e.data=t,e.data1=t}))}},mounted:function(){this.getRoles()}},z=U,q=(n("1b69"),Object(y["a"])(z,B,L,!1,null,"56296ed4",null)),H=q.exports,J={components:{MenuSideLeft:m,MenuSideRight:I,RoleHeader:F,RoleList:H},data:function(){return{addVisible:!1,removeVisible:!1,choiceItems:[],rightChoiceItems:[],choiceItems2:[],leftChoiceItems:[],department:{},menuResult:[],query:1052,edit:1052,delete:1054,add:1051,isQuery:!1,isEdit:!1,isDelete:!1,isAdd:!1,auth:[]}},created:function(){this.isQuery=Object(o["c"])(this.query),this.isEdit=Object(o["c"])(this.edit),this.isDelete=Object(o["c"])(this.delete),this.isAdd=Object(o["c"])(this.add),this.auth=[this.isAdd,this.isEdit]},mounted:function(){},methods:{deleteSuccess:function(){this.addVisible=!1,this.removeVisible=!1,this.$refs.allAuths.resetAll(),this.$refs.right.resetAll(),this.$refs.headere.removeValue()},getMenuResult:function(){this.menuResult=Object.assign([],this.$refs.right.treeDatas)},submitSuccess:function(){this.addVisible=!1,this.removeVisible=!1,this.$refs.allAuths.resetAll(),this.$refs.right.resetAll(),this.$refs.getResult.getRoles()},addRole:function(){this.$refs.allAuths.addRoleAuth(),this.rightChoiceItems=this.choiceItems,this.addVisible=!1},removeRole:function(){this.$refs.right.removeRoleAuth(),this.leftChoiceItems=this.choiceItems2,this.removeVisible=!1},getChoiceItems:function(e){this.choiceItems=e,this.addVisible=!!(e&&e.length>0)},getLeftChoiceItems:function(e){this.choiceItems2=e,this.removeVisible=!!(e&&e.length>0)},editDepartment:function(e,t){"edit"==t&&(e.type=t,this.department=Object.assign({},e))}}},W=J,X=Object(y["a"])(W,a,i,!1,null,null,null);t["default"]=X.exports}}]);