(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-33f41c1f"],{"0b1b":function(e,t,a){},"0fea":function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return c}));var r=a("b775"),i={user:"/user",role:"/role",service:"/service",permission:"/permission",permissionNoPager:"/permission/no-pager",orgTree:"/org/tree",getUserInfo:"/org/getUserInfo"};function n(e){return Object(r["b"])({url:i.role,method:"get",params:e})}function o(e){return Object(r["b"])({url:i.service,method:"get",params:e})}function s(e){return Object(r["b"])({url:i.permissionNoPager,method:"get",params:e})}function c(e){return Object(r["b"])({url:i.orgTree,method:"get",params:e})}},"24d2":function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"l",(function(){return s})),a.d(t,"k",(function(){return c})),a.d(t,"i",(function(){return l})),a.d(t,"e",(function(){return u})),a.d(t,"h",(function(){return d})),a.d(t,"g",(function(){return p})),a.d(t,"a",(function(){return f})),a.d(t,"m",(function(){return m})),a.d(t,"f",(function(){return h})),a.d(t,"j",(function(){return g}));var r=a("0c6d");function i(e){return r["a"].fetchP({url:"/teamwork-api/project/addProjectInfo",data:e})}function n(e){return r["a"].fetchG({url:"/teamwork-api/project/findAllProjectInfo",data:e})}function o(e){return r["a"].fetchG({url:"/teamwork-api/project/deleteProjectInfo",data:e})}function s(e){return r["a"].fetchG({url:"/teamwork-api/project/findProjectByProjectName",data:e})}function c(e){return r["a"].fetchG({url:"/teamwork-api/project/findPreciseProject",data:e})}function l(e){return r["a"].fetchP({url:"/teamwork-api/project/updateProjectInfo",data:e})}function u(e){return r["a"].fetchG({url:"/teamwork-api/project/getProjectNumber",data:e})}function d(e){return r["a"].fetchG({url:"/teamwork-api/project/queryStaffInfoByProjectId",data:e})}function p(e){return r["a"].fetchG({url:"/teamwork-api/project/queryStaffInfoByOrgId",data:e})}function f(e){return r["a"].fetchP({url:"/teamwork-api/project/addProjectMember",data:e})}function m(e){return r["a"].fetchG({url:"/teamwork-api/project/deleteProjectMember",data:e})}function h(e){return r["a"].fetchG({url:"/teamwork-api/project/queryProjectType",data:e})}function g(e){return r["a"].fetchG({url:"/teamwork-api/project/updateProjectMemberRole",data:e})}},3136:function(e,t,a){"use strict";var r=a("5010"),i=a.n(r);i.a},"47d5":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"选择模板",visible:e.visible,width:900,footer:""},on:{cancel:e.handleCancel}},[a("div",{staticClass:"ant-pro-pages-list-projects-cardList"},[a("a-list",{attrs:{loading:e.loading,"data-source":e.data,grid:{gutter:16,column:4}},scopedSlots:e._u([{key:"renderItem",fn:function(t,r){return a("a-list-item",{},[null===t?[a("a-card",{attrs:{id:"a",hoverable:""}},[a("a-icon",{attrs:{type:"plus"}}),e._v("\n                                        新建普通项目\n                                ")],1)]:[a("a-card",{staticStyle:{height:"210px",width:"200px"},attrs:{hoverable:""},on:{click:function(a){return e.addPro(t.codeValue)}}},[a("img",{attrs:{slot:"cover",alt:"example",src:e.avatar},slot:"cover"}),a("a-card-meta",{attrs:{title:t.codeName}},[a("template",{slot:"description"},[a("ellipsis",{attrs:{length:50}},[e._v("This is the description")])],1)],2)],1)]],2)}}])})],1),a("AddProject",{ref:"AddProject",on:{"submit-add":e.appendToList}})],1)},i=[],n=a("24d2"),o=a("e0a5"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{width:600,visible:e.visible,confirmLoading:e.confirmLoading,title:"新建项目"},on:{ok:e.handleSubmit,cancel:e.cancel}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"项目头像",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-row",[e.isShow?a("a-col",{attrs:{span:14}},[a("img",{staticStyle:{width:"150px",height:"100px"},attrs:{src:e.avatar}})]):e._e(),a("a-col",{attrs:{span:8}},[a("UploadImages",{directives:[{name:"decorator",rawName:"v-decorator",value:["projectPicture"],expression:"[\n              'projectPicture']"}],ref:"up",on:{childFn:e.parentFn}})],1)],1)],1),a("a-form-item",{attrs:{label:"项目名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["projectName",{rules:[{required:!0,message:"请输入项目名称"}]}],expression:"['projectName', {rules:[{required: true, message: '请输入项目名称'}]}]"}],ref:"myInput",attrs:{placeholder:"请输入项目名"},on:{blur:e.queryProject}})],1),a("a-form-item",{attrs:{label:"项目周期",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["time",{rules:[{required:!0,message:"请设置项目周期"}]}],expression:"['time', {rules:[{required: true, message: '请设置项目周期'}]}]"}],attrs:{format:"YYYY-MM-DD"}})],1),a("a-form-item",{attrs:{label:"项目描述",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["projectDetail"],expression:"['projectDetail']"}],attrs:{placeholder:"介绍一下这个项目"}})],1),a("a-form-item",{attrs:{label:"项目分组",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["orgId"],expression:"['orgId']"}],attrs:{placeholder:"选择项目分组(可选)",allowClear:""}},e._l(e.CompanyList,(function(t){return a("a-select-option",{attrs:{value:t.orgId}},[e._v(e._s(t.orgName))])})),1)],1)],1)],1)},c=[],l=(a("2338"),a("f763"),a("fb37"),a("f010")),u=a("7e85"),d=a("08c1");function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(Object(a),!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={name:"AddProject",components:{UploadImages:u["a"]},data:function(){return{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},visible:!1,previewVisible:!1,previewImage:"",fileList:[],form:this.$form.createForm(this),confirmLoading:!1,projectType:0,CompanyList:[],avatar:"",isShow:!0}},computed:f({},Object(d["e"])({user:function(e){return e.user.info}})),methods:{parentFn:function(e){1==e&&(this.isShow=!1),2==e&&(this.isShow=!0)},queryCompany:function(){var e=this;Object(o["b"])().then((function(t){console.log(t),e.CompanyList=t[e.user.companyName]}))},add:function(e,t){this.projectType=e,this.visible=!0,this.isShow=!0,this.queryCompany(),this.avatar=t},queryProject:function(){var e=this,t=this.form.getFieldValue("projectName");if(console.log(t),t){var a={projectName:t};Object(n["k"])(a).then((function(t){console.log(t),t&&(e.$message.info("当前项目名已存在，请重新输入"),e.form.setFieldsValue({projectName:""}),e.$nextTick((function(){this.$refs.myInput.focus()})))}))}},edit:function(e){var t=this.form.setFieldsValue;this.visible=!0,this.$nextTick((function(){t({taskName:"test"})}))},disabledDate:function(e){return e&&e<moment().endOf("day")},cancel:function(){this.visible=!1,this.form.resetFields(),this.$refs.up.reset()},handleSubmit:function(){var e=this;this.confirmLoading=!0,this.form.validateFields((function(t,a){if(!t){var r="";r=e.isShow?{projectPicture:e.avatar,projectName:a.projectName,projectType:e.projectType,orgId:a.orgId,projectDetail:a.projectDetail,startDate:a.time[0],endDate:a.time[1]}:{projectPicture:a.projectPicture,projectName:a.projectName,projectType:e.projectType,orgId:a.orgId,projectDetail:a.projectDetail,startDate:a.time[0],endDate:a.time[1]},console.log("project",r),Object(n["b"])(r).then((function(t){e.visible=!1,e.$message.success("项目创建成功"),e.confirmLoading=!1,e.$emit("submit-add"),e.form.resetFields(),e.$refs.up.reset()})).catch((function(t){e.$message.error("项目创建失败,请重新输入"),e.form.resetFields()}))}}))}}},h=m,g=a("4e82"),b=Object(g["a"])(h,s,c,!1,null,null,null),v=b.exports,j=a("2af9"),y={name:"projectType",components:{Ellipsis:j["g"],AddProject:v},data:function(){return{roleList:[],visible:!1,loading:!1,data:[],form:this.$form.createForm(this),avatar:"https://gw.alipayobjects.com/zos/rmsportal/uMfMFlvUuceEyPpotzlq.png"}},mounted:function(){this.queryType()},methods:{appendToList:function(){this.$emit("submit-add")},addPro:function(e){this.visible=!1,this.$refs.AddProject.add(e,this.avatar)},queryType:function(){var e=this;this.data.push(null),Object(n["f"])().then((function(t){console.log(t);for(var a=0;a<t.length;a++)e.data.push(t[a])}))},add:function(){this.visible=!0},showModal:function(){this.visible=!0},handleOk:function(e){var t=this;this.confirmLoading=!0,this.form.validateFields((function(e,a){if(!e){var r={userIdList:t.data.userId,projectId:t.data.projectId,projectRole:a.role};console.log(r),Object(n["a"])(r).then((function(e){t.visible=!1,t.$message.success("添加成功"),t.confirmLoading=!1,t.$emit("childFn")}))}}))},handleCancel:function(e){this.visible=!1}}},w=y,P=(a("cce5"),Object(g["a"])(w,r,i,!1,null,"5addd122",null));t["a"]=P.exports},"4a6a":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"e",(function(){return n})),a.d(t,"c",(function(){return o})),a.d(t,"a",(function(){return s})),a.d(t,"b",(function(){return c})),a.d(t,"f",(function(){return l}));var r=a("0c6d");function i(e){return r["a"].fetchP({url:"/teamwork-api/cust/modifyStaffName",data:e})}function n(e){return r["a"].fetchG({url:"/teamwork-api/cust/modifyPassword",data:e})}function o(e){return r["a"].fetchG({url:"/teamwork-api/sec/getSecOrgByOrgId",data:e})}function s(e){return r["a"].fetchP({url:"/teamwork-api/sec/saveSecOrg",data:e})}function c(e){return r["a"].fetchG({url:"/teamwork-api/sec/getSecAccAuthByOrgIdAndUserId",data:e})}function l(e){return r["a"].fetchP({url:"/teamwork-api/sec/saveUserInfo",data:e})}},5010:function(e,t,a){},"74c9":function(e,t,a){"use strict";var r=a("cc01"),i=a.n(r);i.a},"7e85":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-spin",{attrs:{spinning:e.spinning}},[a("div",[a("a-upload",{attrs:{action:"",listType:"picture-card",defaultFileList:e.fileList,fileList:e.fileList,accept:"image/gif,image/jpeg,image/jpg,image/png,image/svg",beforeUpload:e.beforeUpload,disabled:e.disabled},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<1?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("上传新头像")])],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)])},i=[],n={data:function(){return{previewVisible:!1,previewImage:"",fileList:[],spinning:!1}},props:{disabled:{type:Boolean,default:!1}},methods:{handleCancel:function(){this.previewVisible=!1},reset:function(){this.fileList=[]},handlePreview:function(e){this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0},handleChange:function(e){var t=this,a=e.fileList;a.length>0&&a[0].size/1024/1024>2||(this.fileList=a,this.fileList.length>0?this.$emit("childFn",1):this.$emit("childFn",2),setTimeout((function(){t.spinning=!1,t.$emit("change",t.fileList[0].thumbUrl)}),300))},beforeUpload:function(e){return e.size/1024/1024>2?this.$message.error("图片需要小于2MB!"):this.spinning=!0,!1}}},o=n,s=(a("3136"),a("4e82")),c=Object(s["a"])(o,r,i,!1,null,null,null);t["a"]=c.exports},"829a":function(e,t,a){},"92b4":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[1==e.state?a("a-card",{staticStyle:{"margin-top":"5px"},attrs:{bordered:!1,title:"进行中的项目"}},[a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-input-search",{staticStyle:{"margin-left":"16px",width:"272px"},attrs:{placeholder:"请输入项目名",enterButton:"搜索"},on:{search:e.onSearch},model:{value:e.projectName,callback:function(t){e.projectName=t},expression:"projectName"}}),a("router-link",{attrs:{to:{path:"/tm/projectCard"}}},[a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[e._v("卡片视图")])]),a("a-button",{staticClass:"new-btn",attrs:{type:"dashed",icon:"setting"}})],2)],1)],1),a("div",{staticClass:"operate"},[a("a-button",{staticStyle:{width:"100%"},attrs:{type:"dashed",icon:"plus"},on:{click:function(t){return e.$refs.projectType.add()}}},[e._v("创建新项目")])],1),a("a-list",{staticStyle:{cursor:"pointer"},attrs:{loading:e.loading,size:"large",pagination:e.pagination}},e._l(e.ProjectList,(function(t,r){return a("a-list-item",{key:r},[a("a-list-item-meta",{attrs:{description:t.projectDetail}},[a("a-avatar",{staticClass:"card-avatar",attrs:{slot:"avatar",src:t.projectPicture,size:"large"},slot:"avatar"}),a("a",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.projectName))])],1),a("div",{staticClass:"list-content"},[a("div",{staticClass:"list-content-item"},[a("a",{on:{click:function(a){return e.$refs.addUser.add(t.projectId)}}},[a("span",[e._v("项目成员")]),a("p",[e._v("      "),a("a-icon",{attrs:{type:"team"}})],1)])]),a("div",{staticClass:"list-content-item"},[a("a-popconfirm",{attrs:{title:"确定要删除吗？",okText:"Yes",cancelText:"No"},on:{confirm:function(a){return e.confirm(t.projectId)}}},[a("a",[a("p",[e._v("删除")]),a("p",[e._v("  "),a("a-icon",{attrs:{type:"delete"}})],1)])])],1),a("div",{staticClass:"list-content-item"},[a("a",{on:{click:function(a){return e.modifyProject(t.projectName)}}},[a("p",[e._v("编辑")]),a("p",[e._v("   "),a("a-icon",{attrs:{type:"edit"}})],1)])])])],1)})),1)],1):e._e(),2==e.state?a("a-card",{staticStyle:{"margin-top":"5px"},attrs:{bordered:!1,title:"全部项目"}},[a("div",{attrs:{slot:"extra"},slot:"extra"},[a("a-input-search",{staticStyle:{"margin-left":"16px",width:"272px"},attrs:{placeholder:"请输入项目名",enterButton:"搜索"},on:{search:e.onSearch},model:{value:e.projectName,callback:function(t){e.projectName=t},expression:"projectName"}}),a("router-link",{attrs:{to:{path:"/tm/projectCard"}}},[a("a-button",{staticClass:"new-btn",attrs:{type:"dashed",icon:"setting"}})],1)],1),a("div",{staticClass:"operate"},[a("a-button",{staticStyle:{width:"100%"},attrs:{type:"dashed",icon:"plus"},on:{click:function(t){return e.$refs.projectType.add()}}},[e._v("创建新项目")])],1),a("a-list",{staticStyle:{cursor:"pointer"},attrs:{loading:e.loading,size:"large",pagination:e.pagination}},e._l(e.ProjectList,(function(t,r){return a("a-list-item",{key:r},[a("a-list-item-meta",{attrs:{description:t.projectDetail}},[a("a-avatar",{staticClass:"card-avatar",attrs:{slot:"avatar",src:t.projectPicture,size:"large"},slot:"avatar"}),a("a",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.projectName))])],1),a("div",{staticClass:"list-content"},[a("div",{staticClass:"list-content-item"},[a("a",{on:{click:function(a){return e.$refs.addUser.add(t.projectId)}}},[a("span",[e._v("项目成员")]),a("p",[e._v("      "),a("a-icon",{attrs:{type:"team"}})],1)])]),a("div",{staticClass:"list-content-item"},[a("a-popconfirm",{attrs:{title:"确定要删除吗？",okText:"Yes",cancelText:"No"},on:{confirm:function(a){return e.confirm(t.projectId)}}},[a("a",[a("p",[e._v("删除")]),a("p",[e._v("  "),a("a-icon",{attrs:{type:"delete"}})],1)])])],1),a("div",{staticClass:"list-content-item"},[a("a",{on:{click:function(a){return e.modifyProject(t.projectName)}}},[a("p",[e._v("编辑")]),a("p",[e._v("   "),a("a-icon",{attrs:{type:"edit"}})],1)])])])],1)})),1)],1):e._e(),a("modifyProject",{ref:"modifyPro",on:{childFn:e.parentFn}}),a("projectType",{ref:"projectType",on:{"submit-add":e.appendToList}}),a("addUser",{ref:"addUser"})],1)},i=[],n=a("47d5"),o=a("24d2"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{width:640,visible:e.visible,title:"修改项目"},on:{ok:e.handleSubmit,cancel:e.cancel}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-form-item",{attrs:{label:"项目名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["projectName",{rules:[{required:!0,message:"请输入项目名称"}]}],expression:"['projectName', {rules:[{required: true, message: '请输入项目名称'}]}]"}],ref:"myInput",attrs:{disabled:"disabled"}})],1),a("a-form-item",{attrs:{label:"项目类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["projectType"],expression:"['projectType']"}],attrs:{disabled:"disabled"}})],1),a("a-form-item",{attrs:{label:"项目周期",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-range-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["time",{rules:[{required:!0,message:"请设置项目周期"}]}],expression:"['time', {rules:[{required: true, message: '请设置项目周期'}]}]"}],attrs:{format:"YYYY-MM-DD"}})],1),a("a-form-item",{attrs:{label:"项目描述",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["projectDetail"],expression:"['projectDetail']"}]})],1)],1)],1)},c=[],l=a("6bf2"),u=a.n(l),d={name:"ModifyPro",components:{ProjectList:y},data:function(){return{labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:13}},list:[],current:0,pageSize:0,visible:!1,form:this.$form.createForm(this),date:[],dateFormat:"YYYY-MM-DD "}},methods:{moment:u.a,add:function(){this.visible=!0},edit:function(e){var t=this.form.setFieldsValue;this.visible=!0,this.$nextTick((function(){t({taskName:"test"})}))},handleSubmit:function(){var e=this;this.form.validateFields((function(t,a){if(!t){if(e.list.startDate==a.time[0]&&e.list.endDate==a.time[1]&&e.list.projectDetail==a.projectDetail)return void e.$message.info("提示：你没有做修改");var r={projectId:e.list.projectId,projectDetail:a.projectDetail,startDate:a.time[0],endDate:a.time[1]};Object(o["i"])(r).then((function(t){t?(e.$message.success("项目修改成功"),e.form.resetFields(),e.visible=!1,e.$emit("childFn")):(e.$message.error("项目修改失败,请重新修改"),e.form.resetFields(),e.visible=!1)}))}}))},modifyPro:function(e){this.list=e,this.form.getFieldDecorator("projectName",{initialValue:e.projectName}),this.form.getFieldDecorator("projectType",{initialValue:e.projectTypeName}),this.form.getFieldDecorator("projectDetail",{initialValue:e.projectDetail}),this.date=[],this.date.push(u()(e.startDate,this.dateFormat)),this.date.push(u()(e.endDate,this.dateFormat)),this.form.getFieldDecorator("time",{initialValue:this.date})},cancel:function(){this.visible=!1,this.form.resetFields()}}},p=d,f=a("4e82"),m=Object(f["a"])(p,s,c,!1,null,null,null),h=m.exports,g=a("b2ae"),b={name:"ProjectList",components:{modifyProject:h,addUser:g["a"],projectType:n["a"]},data:function(){var e=this;return{cover:"https://gw.alipayobjects.com/zos/rmsportal/dURIMkkrRFpPgTuzkwnB.png",state:0,ProjectList:[],projectName:"",loading:!0,pagination:{current:1,defaultCurrent:1,pageSize:5,showSizeChanger:!0,showQuickJumper:!0,total:0,showTotal:function(e){return"共 ".concat(e," 条数据")},pageSizeOptions:["5","10","15","20"],onChange:function(t,a){return e.changePage(t,a)},onShowSizeChange:function(t,a){return e.changePageSize(t,a)}}}},mounted:function(){this.state=this.$route.query.state,this.changePage(1,this.pagination.pageSize)},methods:{changePage:function(e,t){var a=this;this.loading=!0,console.log("222222222222222222"),this.pagination.current=e;var r={current:e,pageSize:t,projectPeriod:this.state};Object(o["d"])(r).then((function(e){console.log(e),a.ProjectList=e,a.total=e.length})),Object(o["e"])({projectPeriod:this.state}).then((function(e){a.pagination.total=e})),setTimeout((function(){a.loading=!1}),2e3)},del:function(e){var t=this,a={projectId:e};Object(o["c"])(a).then((function(e){e?(t.$message.success("删除成功"),Object(o["e"])({projectPeriod:t.state}).then((function(e){var a=Math.ceil(e/t.pagination.pageSize);a<t.pagination.current?t.changePage(t.pagination.current-1,t.pagination.pageSize):t.changePage(t.pagination.current,t.pagination.pageSize)}))):t.$message.error("删除失败！")}))},onSearch:function(e){var t=this;if(e){var a={projectName:e};Object(o["l"])(a).then((function(e){console.log(a),console.log(e),t.ProjectList=e,t.projectName=""}))}else this.$message.info("提示：请输入项目名 ")},confirm:function(e){this.del(e)},modifyProject:function(e){var t=this,a={projectName:e};Object(o["k"])(a).then((function(e){console.log(e),console.log(t.$refs),e&&(t.$refs.modifyPro.add(),t.$refs.modifyPro.modifyPro(e))}))},parentFn:function(){this.changePage(this.pagination.current,this.pagination.pageSize)},appendToList:function(){var e=this;Object(o["e"])({projectPeriod:this.state}).then((function(t){var a=Math.ceil(t/e.pagination.pageSize);e.changePage(a,e.pagination.pageSize)}))},changePageSize:function(e,t){this.pagination.pageSize=t,this.changePage(1,t)}}},v=b,j=(a("74c9"),Object(f["a"])(v,r,i,!1,null,"76486a84",null)),y=t["default"]=j.exports},ad4b:function(e,t,a){"use strict";var r=a("0b1b"),i=a.n(r);i.a},b2ae:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{width:800,visible:e.visible,footer:"",title:"项目成员"},on:{cancel:e.cancel}},[a("a-table",{ref:"table",attrs:{size:"default",columns:e.columns,dataSource:e.loadData,alert:!1,loading:e.loading},scopedSlots:e._u([e._l(["roleNameList"],(function(t){return{key:t,fn:function(r,i,n){return["roleNameList"==t?a("div",e._l(r,(function(t){return a("div",[a("a-tag",{key:t},[e._v(e._s(t))])],1)})),0):e._e()]}}}))],null,!0)}),a("org-modal",{ref:"modal",on:{ok:e.handleSaveOk,close:e.handleSaveClose}})],1)},i=[],n=(a("2338"),a("f763"),a("fb37"),a("5279"),a("f010")),o=(a("7364"),a("f301"),a("df99"),a("1bff")),s=a("2af9"),c=a("b70d"),l=a("0fea"),u=a("4a6a"),d=a("08c1"),p=a("24d2");function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={name:"projectMember",components:{STable:s["q"],STree:o["a"],OrgModal:c["a"]},data:function(){var e=this;return{visible:!1,loading:!0,searchText:"",searchInput:null,openKeys:["key-01"],expandedKeys:[],autoExpandParent:!0,treeData:[],columns:[{title:"姓名",dataIndex:"userName",key:"userName",scopedSlots:{filterDropdown:"filterDropdown",filterIcon:"filterIcon",customRender:"customRender"},onFilter:function(e,t){return t.name.toLowerCase().includes(e.toLowerCase())},onFilterDropdownVisibleChange:function(t){t&&setTimeout((function(){e.searchInput.focus()}),0)}},{title:"角色",dataIndex:"roleNameList",key:"roleNameList",scopedSlots:{customRender:"roleNameList"}},{title:"所属部门",dataIndex:"orgName",key:"orgName"},{title:"邮箱",dataIndex:"mail",key:"mail"},{title:"手机号",dataIndex:"phoneNum",key:"phoneNum"},{title:"进入项目时间",dataIndex:"createDate",key:"createDate"}],loadData:[],orgTree:[],selectedRowKeys:[],selectedRows:[],projectId:0}},mounted:function(){},computed:m({},Object(d["c"])(["userInfo"])),created:function(){var e=this;Object(l["a"])().then((function(t){e.orgTree=t.result}))},methods:{handleSubmit:function(){},add:function(e){this.visible=!0,this.loading=!0,this.projectId=e,this.getUsers(e)},getUsers:function(e){var t=this;Object(p["h"])({projectId:e}).then((function(e){console.log(e),t.loadData=e,setTimeout((function(){t.loading=!1}),500)}))},cancel:function(){this.visible=!1,this.loadData=[]},handleClick:function(e){console.log("handleClick",e),this.queryParam={key:e.key},this.$refs.table.refresh(!0)},handleAdd:function(e){console.log("add button, item",e),this.$message.info("提示：你点了 ".concat(e.key," - ").concat(e.title," ")),this.$refs.modal.add(e.key)},handleTitleClick:function(e){console.log("handleTitleClick",e)},titleClick:function(e){console.log("titleClick",e)},handleSaveOk:function(){},handleSaveClose:function(){},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t},handleSearch:function(e,t){t(),this.searchText=e[0]},handleReset:function(e){e(),this.searchText=""},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},getData:function(){var e=this;Object(u["c"])({orgId:11}).then((function(t){e.treeData=Array.of(t),e.searchMenu(Array.of(t)),console.log(e.treeData)}))},searchMenu:function(e){for(var t=0;t<e.length;t++)e[t].title=e[t].orgName,e[t].key=e[t].orgId,e[t].scopedSlots={title:"title"},e[t].parent=e.parentId,e[t].child&&e[t].child.result&&(e[t].children=e[t].child.result,e[t].children.parentId=e[t].child.orgRelatId,this.searchMenu(e[t].child.result))},onSelect:function(e){var t=this;getUserByOrgId({orgId:e}).then((function(e){console.log(e),t.loadData=e}))}}},g=h,b=(a("ad4b"),a("4e82")),v=Object(b["a"])(g,r,i,!1,null,null,null);t["a"]=v.exports},b70d:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"操作",width:600,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleOk,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"父级ID"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["parentId",{}],expression:"['parentId', {}]"}],attrs:{disabled:""}})],1),a("a-form-item",{attrs:{label:"机构名称"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["orgName",{}],expression:"['orgName', {}]"}]})],1)],1)],1)],1)},i=[],n=(a("2338"),a("f763"),a("fb37"),a("f010"));function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(n["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={name:"OrgModal",data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:16}},visible:!1,confirmLoading:!1,mdl:{}}},beforeCreate:function(){this.form=this.$form.createForm(this),console.log("form::",this.form)},created:function(){},methods:{add:function(e){this.edit({parentId:e})},edit:function(e){var t=this;this.mdl=Object.assign({},e),this.visible=!0,this.$nextTick((function(){t.form.setFieldsValue(s({},e))}))},close:function(){this.$emit("close"),this.visible=!1},handleOk:function(){var e=this;this.form.validateFields((function(t,a){t||(console.log("form values",a),e.confirmLoading=!0,new Promise((function(e){setTimeout((function(){return e()}),2e3)})).then((function(){e.$message.success("保存成功"),e.$emit("ok")})).catch((function(){})).finally((function(){e.confirmLoading=!1,e.close()})))}))},handleCancel:function(){this.close()}}},l=c,u=a("4e82"),d=Object(u["a"])(l,r,i,!1,null,null,null);t["a"]=d.exports},cc01:function(e,t,a){},cce5:function(e,t,a){"use strict";var r=a("829a"),i=a.n(r);i.a}}]);